"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[51486],{21125:(e,l,o)=>{o.r(l),o.d(l,{assets:()=>i,contentTitle:()=>s,default:()=>p,frontMatter:()=>a,metadata:()=>r,toc:()=>c});var n=o(87462),t=(o(67294),o(3905));const a={sidebar_position:4},s="Local Docker Mode",r={unversionedId:"deploy/local-docker-mode",id:"version-v0.5/deploy/local-docker-mode",title:"Local Docker Mode",description:"Walrus can be deployed in local Docker mode. Using this mode, developers can deploy Walrus files on Docker locally on their PCs. This allows for consistent application specification, matching the one applied to a production Kubernetes environment. No need to use Kubernetes locally\u2014simply use Docker instead.",source:"@site/versioned_docs/version-v0.5/deploy/local-docker-mode.md",sourceDirName:"deploy",slug:"/deploy/local-docker-mode",permalink:"/docs/v0.5/deploy/local-docker-mode",draft:!1,editUrl:"https://github.com/seal-io/docs/edit/main/versioned_docs/version-v0.5/deploy/local-docker-mode.md",tags:[],version:"v0.5",sidebarPosition:4,frontMatter:{sidebar_position:4},sidebar:"docs",previous:{title:"Airgap Installation",permalink:"/docs/v0.5/deploy/airgap"},next:{title:"Options",permalink:"/docs/v0.5/deploy/options"}},i={},c=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"Install Local Walrus",id:"install-local-walrus",level:2},{value:"Deploy Resources",id:"deploy-resources",level:2},{value:"Uninstall Local Walrus",id:"uninstall-local-walrus",level:2}],u={toc:c};function p(e){let{components:l,...o}=e;return(0,t.kt)("wrapper",(0,n.Z)({},u,o,{components:l,mdxType:"MDXLayout"}),(0,t.kt)("h1",{id:"local-docker-mode"},"Local Docker Mode"),(0,t.kt)("p",null,"Walrus can be deployed in local Docker mode. Using this mode, developers can deploy Walrus files on Docker locally on their PCs. This allows for consistent application specification, matching the one applied to a production Kubernetes environment. No need to use Kubernetes locally\u2014simply use Docker instead."),(0,t.kt)("h2",{id:"prerequisites"},"Prerequisites"),(0,t.kt)("ul",null,(0,t.kt)("li",{parentName:"ul"},"Docker installed, if not please refer to ",(0,t.kt)("a",{parentName:"li",href:"https://docs.docker.com/"},"Docker's official documentation")," for how to set up Docker on your machine."),(0,t.kt)("li",{parentName:"ul"},"(Optional) Docker Desktop installed with ",(0,t.kt)("a",{parentName:"li",href:"https://docs.docker.com/desktop/extensions/"},"Docker Extensions")," enabled. Walrus Docker extension will be installed if applicable."),(0,t.kt)("li",{parentName:"ul"},"Walrus CLI installed, if not please refer to ",(0,t.kt)("a",{parentName:"li",href:"../cli"},"CLI documentation")," for how to install Walrus CLI.")),(0,t.kt)("h2",{id:"install-local-walrus"},"Install Local Walrus"),(0,t.kt)("p",null,"Run the following command to install Walrus in local docker mode."),(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre",className:"language-shell"},"walrus local install\n")),(0,t.kt)("p",null,"You should see the following output:"),(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre",className:"language-shell"},"? Install Walrus docker extension to proceed [y/N] y\nInstalling...\nChecking readiness...\nWalrus CLI is configured.\n")),(0,t.kt)("p",null,"You can configure ",(0,t.kt)("a",{parentName:"p",href:"./options"},"server options")," for the local Walrus using the ",(0,t.kt)("inlineCode",{parentName:"p"},"--env(-e)")," flag. For example, to set Gitee as the default catalog provider, run the following command:"),(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre",className:"language-shell"},"walrus local install -e SERVER_BUILTIN_CATALOG_PROVIDER=gitee\n")),(0,t.kt)("blockquote",null,(0,t.kt)("p",{parentName:"blockquote"},"Note: Due to the limitation that Docker Extensions cannot provide bootstrap options, when this flag is set, the local Walrus will be installed using a plain Docker container, even if Docker Extensions are enabled in your Docker Desktop.")),(0,t.kt)("h2",{id:"deploy-resources"},"Deploy Resources"),(0,t.kt)("p",null,"Now you can start deployments using Walrus CLI. For example, given the following ",(0,t.kt)("inlineCode",{parentName:"p"},"nginx")," example from the ",(0,t.kt)("a",{parentName:"p",href:"https://github.com/seal-io/walrus-file-hub"},"Walrus File Hub"),","),(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre",className:"language-yaml"},"# nginx.yaml\nresources:\n  - name: nginx\n    type: containerservice\n    attributes:\n      containers:\n        - image: nginx\n          profile: run\n          ports:\n            - internal: 80\n              external: 80\n          files:\n            - path: /usr/share/nginx/html/index.html\n              content: |\n                <html>\n                  <h1>Welcome to Walrus!</h1>\n                </html>\n")),(0,t.kt)("p",null,"Run the following command to deploy the ",(0,t.kt)("inlineCode",{parentName:"p"},"nginx")," example."),(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre",className:"language-shell"},"walrus apply -f nginx.yaml --wait\n")),(0,t.kt)("p",null,"You should see the following output:"),(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre",className:"language-shell"},"resource default/local/nginx created\nresource default/local/nginx is in status: Deploying\nresource default/local/nginx is in status: Preparing\nresource default/local/nginx is in status: Ready\n")),(0,t.kt)("p",null,"After that, you can list the resources to verify and get the service URL to access."),(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre",className:"language-shell"},"walrus resource list\n")),(0,t.kt)("p",null,"You should see the following output:"),(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre",className:"language-shell"},' ID                   NAME    ENDPOINTS                                             TYPE               STATUS   CREATED\n-------------------- ------- ----------------------------------------------------- ------------------ -------- -----------------------------\n 498114759510458370   nginx   [{"name":"80:80/http","url":"http://localhost:80"}]   containerservice   Ready    2024-01-01T00:00:00.000000Z\n')),(0,t.kt)("h2",{id:"uninstall-local-walrus"},"Uninstall Local Walrus"),(0,t.kt)("p",null,"Run the following command to uninstall Walrus in local docker mode."),(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre",className:"language-shell"},"walrus local uninstall\n")))}p.isMDXComponent=!0}}]);