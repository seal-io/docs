"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[1317],{90006:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>p,contentTitle:()=>r,default:()=>d,frontMatter:()=>i,metadata:()=>s,toc:()=>o});var a=n(87462),l=(n(67294),n(3905));const i={sidebar_position:4},r="\u521b\u5efa\u60a8\u7684\u7b2c\u4e00\u4e2a\u6a21\u677f",s={unversionedId:"tutorials/create-first-template",id:"tutorials/create-first-template",title:"\u521b\u5efa\u60a8\u7684\u7b2c\u4e00\u4e2a\u6a21\u677f",description:"\u672c\u6559\u7a0b\u4ecb\u7ecd\u5982\u4f55\u521b\u5efa\u60a8\u7684\u7b2c\u4e00\u4e2a\u6a21\u677f\u5e76\u5728 Walrus \u4e0a\u4f7f\u7528, \u793a\u4f8b\u6a21\u677f\u5c06\u4f1a\u57fa\u4e8e kubernetes \u521b\u5efa\u4e00\u4e2a deployment \u8d44\u6e90\u3002",source:"@site/i18n/zh/docusaurus-plugin-content-docs/current/tutorials/create-first-template.md",sourceDirName:"tutorials",slug:"/tutorials/create-first-template",permalink:"/docs/zh/tutorials/create-first-template",draft:!1,editUrl:"https://github.com/seal-io/docs/edit/main/docs/tutorials/create-first-template.md",tags:[],version:"current",sidebarPosition:4,frontMatter:{sidebar_position:4},sidebar:"docs",previous:{title:"\u5728 Github \u4e0a\u521b\u5efa\u6a21\u677f\u5e93",permalink:"/docs/zh/tutorials/catalog-on-github"},next:{title:"\u96c6\u6210 CICD \u5de5\u5177",permalink:"/docs/zh/tutorials/integrate-with-cicd"}},p={},o=[{value:"\u524d\u63d0\u6761\u4ef6",id:"\u524d\u63d0\u6761\u4ef6",level:2},{value:"\u5728 GitHub \u4e0a\u521b\u5efa\u4ed3\u5e93",id:"\u5728-github-\u4e0a\u521b\u5efa\u4ed3\u5e93",level:2},{value:"\u521b\u5efa\u6a21\u677f\u6587\u4ef6",id:"\u521b\u5efa\u6a21\u677f\u6587\u4ef6",level:2},{value:"\u63d0\u4ea4\u6a21\u677f\u7248\u672c",id:"\u63d0\u4ea4\u6a21\u677f\u7248\u672c",level:2},{value:"\u6a21\u677f\u56fe\u6807",id:"\u6a21\u677f\u56fe\u6807",level:2},{value:"\u6a21\u677f UI \u6e32\u67d3\u6837\u5f0f",id:"\u6a21\u677f-ui-\u6e32\u67d3\u6837\u5f0f",level:2},{value:"\u5728 Walrus \u4e0a\u521b\u5efa\u6a21\u677f",id:"\u5728-walrus-\u4e0a\u521b\u5efa\u6a21\u677f",level:2}],m={toc:o};function d(e){let{components:t,...i}=e;return(0,l.kt)("wrapper",(0,a.Z)({},m,i,{components:t,mdxType:"MDXLayout"}),(0,l.kt)("h1",{id:"\u521b\u5efa\u60a8\u7684\u7b2c\u4e00\u4e2a\u6a21\u677f"},"\u521b\u5efa\u60a8\u7684\u7b2c\u4e00\u4e2a\u6a21\u677f"),(0,l.kt)("p",null,"\u672c\u6559\u7a0b\u4ecb\u7ecd\u5982\u4f55\u521b\u5efa\u60a8\u7684\u7b2c\u4e00\u4e2a\u6a21\u677f\u5e76\u5728 Walrus \u4e0a\u4f7f\u7528, \u793a\u4f8b\u6a21\u677f\u5c06\u4f1a\u57fa\u4e8e kubernetes \u521b\u5efa\u4e00\u4e2a deployment \u8d44\u6e90\u3002"),(0,l.kt)("h2",{id:"\u524d\u63d0\u6761\u4ef6"},"\u524d\u63d0\u6761\u4ef6"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"\u4e00\u4e2a\u7528\u4e8e\u5b58\u50a8\u6a21\u677f\u7684 GitHub \u4ed3\u5e93\u3002"),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("a",{parentName:"li",href:"/deploy/standalone"},"\u90e8\u7f72 Walrus"),"\u3002")),(0,l.kt)("h2",{id:"\u5728-github-\u4e0a\u521b\u5efa\u4ed3\u5e93"},"\u5728 GitHub \u4e0a\u521b\u5efa\u4ed3\u5e93"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"\u5728 GitHub \u4e0a\u521b\u5efa\u60a8\u81ea\u5df1\u7684\u65b0\u4ed3\u5e93\uff0c\u8fd9\u91cc\u6211\u4eec\u4f7f\u7528\u4ed3\u5e93 ",(0,l.kt)("a",{parentName:"li",href:"https://github.com/walrus-catalog-demo/first-template"},"first-template")," \u4f5c\u4e3a\u793a\u4f8b\u3002"),(0,l.kt)("li",{parentName:"ol"},"\u60a8\u53ef\u4ee5\u9009\u62e9\u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u4ed3\u5e93\u6216\u8005\u76f4\u63a5 fork \u793a\u4f8b\u7684 ",(0,l.kt)("a",{parentName:"li",href:"https://github.com/walrus-catalog-demo/first-template"},"first-template")," \u4ed3\u5e93\u3002")),(0,l.kt)("h2",{id:"\u521b\u5efa\u6a21\u677f\u6587\u4ef6"},"\u521b\u5efa\u6a21\u677f\u6587\u4ef6"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"mkdir first-template\ncd first-template\n")),(0,l.kt)("p",null,"\u5728\u76ee\u5f55\u4e2d\u521b\u5efa\u5982\u4e0b\u6587\u4ef6\uff0c\u5177\u4f53\u6587\u4ef6\u5185\u5bb9\u53ef\u4ee5\u53c2\u8003 ",(0,l.kt)("a",{parentName:"p",href:"https://github.com/walrus-catalog-demo/first-template"},"first-template"),":"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"- first-template\n\u251c\u2500\u2500 icon.svg\n\u251c\u2500\u2500 main.tf\n\u251c\u2500\u2500 outputs.tf\n\u251c\u2500\u2500 variables.tf\n...\n")),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"main.tf")," \u6587\u4ef6\u5b9a\u4e49\u4e86\u8981\u521b\u5efa\u7684\u8d44\u6e90\uff0c\u8fd9\u91cc\u6211\u4eec\u4e3a\u6a21\u677f\u5b9a\u4e49\u4e86\u4e00\u4e2a kubernetes deployment \u521b\u5efa\u76f8\u5173\u7684\u8d44\u6e90."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},'resource "kubernetes_deployment" "example" {\n  metadata {\n    name = "example-deployment"\n    labels = {\n      app = "example"\n    }\n  }\n\n  spec {\n    replicas = 1\n    selector {\n      match_labels = {\n        app = "example"\n      }\n    }\n\n    template {\n      metadata {\n        labels = {\n          app = "example"\n        }\n      }\n\n      spec {\n        container {\n          image = var.image\n          name  = "example"\n        }\n      }\n    }\n  }\n}\n\n')),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"variables.tf")," \u6587\u4ef6\u5b9a\u4e49\u4e86\u6a21\u677f\u4e2d\u4f7f\u7528\u7684\u53d8\u91cf\uff0cWalrus \u5c06\u4f7f\u7528\u8fd9\u4e9b\u53d8\u91cf\u751f\u6210\u6a21\u677f\u8868\u5355, \u6211\u4eec\u53ef\u4ee5\u5b9a\u4e49 image \u53d8\u91cf, \u7528\u4e8e\u6307\u5b9a Kubernetes deployment \u7684\u955c\u50cf\uff0c\u60a8\u53ef\u4ee5\u6839\u636e\u5b9e\u9645\u60c5\u51b5\u5b9a\u4e49\u5176\u4ed6\u53d8\u91cf\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},'variable "image" {\n  description = "The image to use for the Kubernetes deployment."\n  type        = string\n}\n')),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"outputs.tf")," \u6587\u4ef6\u5b9a\u4e49\u4e86\u6a21\u677f\u4e2d\u7684\u8f93\u51fa\u53d8\u91cf\u3002\u5f53\u8d44\u6e90\u521b\u5efa\u6210\u529f\u540e\uff0cWalrus \u5c06\u4f1a\u5728\u8d44\u6e90\u8be6\u60c5\u9875\u9762\u663e\u793a\u8f93\u51fa\u53d8\u91cf\u3002\u6211\u4eec\u5b9a\u4e49\u4e86\u4e24\u4e2a\u8f93\u51fa\u53d8\u91cf\uff0c\u5206\u522b\u662f ",(0,l.kt)("inlineCode",{parentName:"p"},"deployment_name")," \u548c ",(0,l.kt)("inlineCode",{parentName:"p"},"deployment_generation")," \u4f5c\u4e3a\u8f93\u51fa\u3002\u60a8\u53ef\u4ee5\u6839\u636e\u9700\u6c42\u5b9a\u4e49\u66f4\u591a\u7684\u8f93\u51fa\u53d8\u91cf\uff0c \u4f8b\u5982\u8f93\u51fa\u8d44\u6e90\u7684 ID\uff0c\u540d\u79f0\u7b49\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},'output "deployment_name" {\n  description = "The name of the Deployment."\n  value       = kubernetes_deployment.example.metadata[0].name\n}\n\noutput "deployment_generation" {\n  description = "The generation of the Deployment."\n  value       = kubernetes_deployment.example.metadata[0].generation\n}\n\n\n')),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"README.md")," \u6587\u4ef6\u662f\u6a21\u677f\u7684\u63cf\u8ff0\u3002\u5728\u4f7f\u7528\u6b64\u6a21\u677f\u521b\u5efa\u8d44\u6e90\u65f6\uff0c\u53ef\u4ee5\u5728\u6a21\u677f\u8be6\u60c5\u9875\u9762\u67e5\u770b\u8be5\u6a21\u677f\u7684\u5177\u4f53\u529f\u80fd\u53c2\u6570\u53ca\u5b9a\u4e49\uff0c\u53ef\u4ee5\u4f7f\u7528\u5de5\u5177 ",(0,l.kt)("a",{parentName:"p",href:"https://github.com/terraform-docs/terraform-docs"},"terraform-docs")," \u6765\u751f\u6210\u6a21\u677f\u7684\u63cf\u8ff0\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-markdown"},"terraform-docs markdown . > README.md\n")),(0,l.kt)("p",null,"\u751f\u6210\u7684 ",(0,l.kt)("inlineCode",{parentName:"p"},"README.md")," \u6587\u4ef6\u5982\u4e0b:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},'## Requirements\n\nNo requirements.\n\n## Providers\n\n| Name | Version |\n|------|---------|\n| <a name="provider_kubernetes"></a> [kubernetes](#provider\\_kubernetes) | n/a |\n\n## Modules\n\nNo modules.\n\n## Resources\n\n| Name | Type |\n|------|------|\n| [kubernetes_deployment.example](https://registry.terraform.io/providers/hashicorp/kubernetes/latest/docs/resources/deployment) | resource |\n\n## Inputs\n\n| Name | Description | Type | Default | Required |\n|------|-------------|------|---------|:--------:|\n| <a name="input_image"></a> [image](#input\\_image) | The image to use for the Kubernetes deployment. | `string` | n/a | yes |\n\n## Outputs\n\n| Name | Description |\n|------|-------------|\n| <a name="output_deployment_generation"></a> [deployment\\_generation](#output\\_deployment\\_generation) | The generation of the Deployment. |\n| <a name="output_deployment_name"></a> [deployment\\_name](#output\\_deployment\\_name) | The name of the Deployment. |\n\n')),(0,l.kt)("h2",{id:"\u63d0\u4ea4\u6a21\u677f\u7248\u672c"},"\u63d0\u4ea4\u6a21\u677f\u7248\u672c"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},'git init\ngit add .\ngit commit -m "add template files"\ngit remote add origin https://github.com/yourname/first-template.git # \u66ff\u6362\u4e3a\u60a8\u7684\u4ed3\u5e93\u5730\u5740\ngit push -u origin main\n')),(0,l.kt)("p",null,"\u4e3a\u6a21\u677f\u521b\u5efa\u4e00\u4e2a\u6807\u7b7e\u4f5c\u4e3a\u7248\u672c"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"git tag v0.1.0\ngit push --tags\n")),(0,l.kt)("h2",{id:"\u6a21\u677f\u56fe\u6807"},"\u6a21\u677f\u56fe\u6807"),(0,l.kt)("p",null,"\u6a21\u677f\u56fe\u6807\u662f\u6a21\u677f\u7684\u6807\u8bc6\uff0c\u7528\u4e8e\u5728 Walrus \u4e0a\u663e\u793a\uff0c \u60a8\u53ef\u4ee5\u5728\u5f53\u524d\u6a21\u677f\u76ee\u5f55\u4e0b\u521b\u5efa\u4e00\u4e2a ",(0,l.kt)("inlineCode",{parentName:"p"},"icon.svg")," \u6587\u4ef6\u4f5c\u4e3a\u6a21\u677f\u56fe\u6807\u3002\u76ee\u524d\u652f\u6301\u7684\u683c\u5f0f\u6709 ",(0,l.kt)("inlineCode",{parentName:"p"},"svg"),"\uff0c",(0,l.kt)("inlineCode",{parentName:"p"},"png"),"\uff0c",(0,l.kt)("inlineCode",{parentName:"p"},"jpg"),"\uff0c",(0,l.kt)("inlineCode",{parentName:"p"},"jpeg"),"\uff0c \u6dfb\u52a0\u4e00\u4e2a ",(0,l.kt)("inlineCode",{parentName:"p"},"icon.svg")," \u6587\u4ef6\u5230\u6a21\u677f\u76ee\u5f55\u4e0b\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},'git add icon.svg\ngit commit -m "add icon.svg"\ngit push -u origin main\n\n')),(0,l.kt)("p",null,"\u521b\u5efa\u65b0\u7684\u7248\u672c\u6807\u7b7e"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"git tag v0.1.1\ngit push --tags\n")),(0,l.kt)("h2",{id:"\u6a21\u677f-ui-\u6e32\u67d3\u6837\u5f0f"},"\u6a21\u677f UI \u6e32\u67d3\u6837\u5f0f"),(0,l.kt)("p",null,"\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0cWalrus \u4f1a\u6839\u636e\u6a21\u677f\u4e2d\u5b9a\u4e49\u7684\u53d8\u91cf\u81ea\u52a8\u751f\u6210\u8868\u5355\u7ec4\u548c\u6807\u7b7e\u7684\u6e32\u67d3\u3002\u60a8\u53ef\u4ee5\u901a\u8fc7",(0,l.kt)("a",{parentName:"p",href:"/operation/template#%E8%87%AA%E5%AE%9A%E4%B9%89%E6%A8%A1%E6%9D%BF-ui-%E6%A0%B7%E5%BC%8F"},"\u81ea\u5b9a\u4e49\u6a21\u677f\u6837\u5f0f"),"\u6765\u81ea\u5b9a\u4e49\u8868\u5355\u7ec4\u548c\u6807\u7b7e\u7684\u6e32\u67d3\u3002"),(0,l.kt)("h2",{id:"\u5728-walrus-\u4e0a\u521b\u5efa\u6a21\u677f"},"\u5728 Walrus \u4e0a\u521b\u5efa\u6a21\u677f"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"\u5728\u6d4f\u89c8\u5668\u4e2d\u6253\u5f00 Walrus \u5e76\u767b\u5f55\u3002"),(0,l.kt)("li",{parentName:"ol"},"\u8f6c\u5230 ",(0,l.kt)("inlineCode",{parentName:"li"},"\u8fd0\u7ef4\u4e2d\u5fc3")," \u4e0b\u7684\u6a21\u677f\u7ba1\u7406\uff0c\u4f7f\u7528\u521a\u521a\u521b\u5efa\u7684\u6a21\u677f\u65b0\u5efa\u4e00\u4e2a\u6a21\u677f\uff0c\u8fd9\u91cc\u5c06\u6a21\u677f\u547d\u540d\u4e3a ",(0,l.kt)("inlineCode",{parentName:"li"},"first-template"),"\u3002\n",(0,l.kt)("img",{alt:"create-template",src:n(43188).Z,width:"3360",height:"1670"}),"\n\u5bfc\u5165\u4efb\u52a1\u5b8c\u6210\u540e\uff0c\u6a21\u677f\u5c06\u663e\u793a\u5728\u6a21\u677f\u5217\u8868\u4e2d\uff0c\u53ef\u4ee5\u770b\u5230\u6a21\u677f\u7248\u672c\u4e3a\u521a\u521a\u521b\u5efa\u7684\u7248\u672c",(0,l.kt)("inlineCode",{parentName:"li"},"v0.1.1"),"\u3002\n",(0,l.kt)("img",{alt:"template-version",src:n(78001).Z,width:"3342",height:"1662"})),(0,l.kt)("li",{parentName:"ol"},"\u5728 ",(0,l.kt)("inlineCode",{parentName:"li"},"\u8fd0\u7ef4\u4e2d\u5fc3")," \u7684 ",(0,l.kt)("inlineCode",{parentName:"li"},"\u8fde\u63a5\u5668"),"\u4e0b\u6dfb\u52a0 k8s \u8fde\u63a5\u5668\u3002\n",(0,l.kt)("img",{alt:"add-connector",src:n(33414).Z,width:"3360",height:"1680"})),(0,l.kt)("li",{parentName:"ol"},"\u914d\u7f6e k8s \u8fde\u63a5\u5668\u5230\u9700\u8981\u521b\u5efa\u8d44\u6e90\u7684\u73af\u5883."),(0,l.kt)("li",{parentName:"ol"},"\u4f7f\u7528\u6a21\u677f ",(0,l.kt)("inlineCode",{parentName:"li"},"first-template")," \u521b\u5efa\u4e00\u4e2a\u8d44\u6e90\uff0c \u8868\u5355\u6e32\u67d3\u662f\u6839\u636e\u4e0a\u8ff0\u6a21\u677f\u4e2d\u5b9a\u4e49\u7684\u53d8\u91cf\u81ea\u52a8\u751f\u6210\u7684\u3002\n",(0,l.kt)("img",{alt:"create-resource",src:n(43586).Z,width:"3360",height:"1670"}),"\n\u8d44\u6e90\u521b\u5efa\u540e\uff0c\u6211\u4eec\u53ef\u4ee5\u5728\u8d44\u6e90\u8be6\u60c5\u9875\u9762\u67e5\u770b\u8d44\u6e90\u8be6\u60c5\u3002\n",(0,l.kt)("img",{alt:"resource-detail",src:n(69070).Z,width:"3360",height:"1672"}),"\n\u68c0\u67e5 k8s deployment\uff0c\u53ef\u4ee5\u770b\u5230 deloyment \u5df2\u6210\u529f\u521b\u5efa\u3002\n",(0,l.kt)("img",{alt:"ecs-instance",src:n(2844).Z,width:"1288",height:"728"}))))}d.isMDXComponent=!0},33414:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/add-connector-479ba8eec0c6649399cf9ad4e29add1c.png"},43586:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/create-resource-5987f1adf525623fd4f1397e1d4ff404.png"},43188:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/create-template-46aecd68508bc17e7bf088295af3cde2.png"},2844:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/deployment-3cb902d588e9f37787fb3baadc71037c.png"},69070:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/resource-a8061c4d5966492c76fcd4e76eb3ae2b.png"},78001:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/template-version-a1812173d84116e092c38e792f389c89.png"}}]);