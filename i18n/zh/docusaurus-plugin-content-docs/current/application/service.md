---
sidebar_position: 3
---


# 服务

## 查看服务列表

服务属于一个环境，进入环境视图可以查看服务列表。

1. 点击左侧导航栏中的`应用管理`。
2. 通过顶层面包屑的项目下拉按钮选择项目。
3. 在项目视图中的环境标签页，找到您需要操作的环境，点击环境名称进入环境视图。
4. 在服务标签页可以查看该环境下的服务列表。可以通过顶层面包屑切换查看不同项目或环境下的服务。

![app-svc-list](/img/v0.4.0/application/service/app-svc-list.png)

## 查看服务详情

1. 进入到环境视图的服务标签页。
2. 找到您需要查看的服务并点击其名称，即进入服务的详情页。

## 创建服务

1. 进入到环境视图的服务标签页。
2. 点击`新建服务`，选择模板和版本，输入`名称`， `描述`，`标签`， 同一个环境下，服务名称应该是唯一的。
3. 在模板配置中，不同的模板有不同的配置项, 可以根据模板的要求填写相应的配置。
4. 点击`保存`按钮。

![qs-create-svc2](/img/v0.4.0/quickstart/qs-create-svc2.png)

## 编辑服务

1. 进入到环境视图的服务标签页。
2. 找到您需要编辑的服务，点击`编辑`操作。
3. 按需要修改配置后，点击`保存`按钮。服务在编辑后会执行一次部署。

## 服务依赖

服务之间可以通过定义引用服务输出来实现依赖关系，引用的服务会在被引用的服务之前部署或者批量删除时先于被依赖的服务删除。

如 web 服务依赖于 mysql 服务，那么 web 服务就可以引用 mysql 服务。在内置的 webservcie 模版中，可以在定义环境变量中引用服务，通过`${service.服务名称.服务输出名称}`的方式引用服务。web 服务中通过环境变量即可获取到 mysql 服务的地址和端口等信息，从而实现服务之间的通信。

![app-svc-ref](/img/v0.4.0/application/service/app-svc-ref.png)

## 服务编排

服务编排是一种将多个服务组合在一起部署的方式，通过编排可以实现服务之间的依赖关系。在编排中，可以定义服务之间的依赖关系，以及服务的部署顺序。根据服务依赖定义不同服务之间的依赖关系，Walrus 会自动按照依赖的关系依次部署服务。如批量克隆多个服务或者批量删除多个服务时，Walrus 会自动按照编排的顺序依次创建或者删除服务。

## 回滚服务

1. 进入到环境视图的服务标签页。
2. 找到您需要回滚的服务。
3. 点击操作下拉按钮，选择`回滚`。

![app-svc-rollback](/img/v0.4.0/application/service/app-svc-rollback.png)

4. 选择您需要回滚的历史版本。
5. 确认回滚操作的配置变更，点击`回滚`按钮即可完成回滚操作。

![app-svc-rollback2](/img/v0.4.0/application/service/app-svc-rollback2.png)

## 克隆服务

1. 进入到环境视图的服务标签页。
2. 选中您需要克隆的服务，点击`克隆服务`按钮。

![app-svc-clone](/img/v0.4.0/application/service/app-svc-clone.png)

3. 选择克隆的目标环境。
4. 如果需要调整克隆的服务配置，在服务下点击要修改的服务方块，在弹窗中修改其中的配置并点击`确定`按钮。
5. 点击`保存`按钮即可完成服务克隆。

![app-svc-clone-edit](/img/v0.4.0/application/service/app-svc-clone-edit.png)

## 删除服务

1. 进入到环境视图的服务标签页。
2. 找到您需要删除的服务。
3. 确保没有其它服务依赖于该服务后，勾选您需要删除的服务，点击`删除`按钮。
4. 在删除弹窗中，您可以选择是否清理服务的资源。如果取消`清理所有资源`的勾选，服务部署的资源会保留，但不再被 Walrus 管理。
5. 点击`确定`按钮完成删除。

![app-svc-del](/img/v0.4.0/application/service/app-svc-del.png)

## 资源

资源是服务部署生成的实体。在服务的详情页可以查看它的资源，包括资源名称、资源类型、资源状态、创建时间等。您可以根据需要对资源进行操作，如查看资源日志, 通过终端连接资源等。

### 查看资源日志

> 注：查看日志操作针对特定的资源类型可用。

1. 进入服务详情页查看资源列表。
2. 找到您需要查看日志的资源，点击`查看日志`操作。

![qs-res-logs](/img/v0.4.0/quickstart/qs-res-logs.png)

### 通过终端连接资源

> 注：终端操作针对特定的资源类型可用。

1. 进入服务详情页查看资源列表。
2. 找到您需要用终端连接的资源，点击`终端`操作。 

![qs-res-exec](/img/v0.4.0/quickstart/qs-res-exec.png)

### 查看服务资源依赖图

进入服务详情页，选择切换资源图即可查看当前服务下的资源分布图。

更多依赖图详情，请参见[依赖图](/application/graph)。

![app-svc-res-graph-view](/img/v0.4.0/application/service/app-svc-res-graph-view.png)

![app-svc-res-graph](/img/v0.4.0/application/service/app-svc-res-graph.png)