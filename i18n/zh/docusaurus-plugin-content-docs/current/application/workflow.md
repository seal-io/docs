---
sidebar_position: 4
---

# 工作流

应用工作流是一套按照特定顺序执行的任务集合。这些任务可以并行或按顺序执行。例如，在部署Web应用时，需要按照特定顺序部署多个服务, 同一个应用通过工作流发布到不同的环境，可以定义工作流的不同步骤来实现。

## 查看工作流列表
1. 点击左侧导航栏的`应用管理` -> `工作流`。
2. 在工作流列表中，可以查看当前项目下的工作流列表。
3. 在搜索框中输入关键字，可以快速搜索相关工作流。

## 创建工作流
1. 通过查看工作流列表的操作，进入工作流列表页面。
2. 点击`新建工作流`，输入`名称`来标识您的工作流。工作流名称是唯一的，您可以通过工作流名称来快速找到它。

![create-wf](/img/v0.4.0/application/workflow/create-wf.png)

3. 填写工作流的基本信息如，`名称`和`描述`。如果您想为工作流设置超时时间，可以在`工作流超时`中设置超时时间，单位为分钟。您还可以设置`并行数量`，限制当前工作流可以同时运行的任务数。
4. 添加**变量**。点击`新建变量`，输入变量名称和值，然后可以添加变量配置。您可以根据工作流的要求添加自己的变量。变量可以通过勾选`运行时可配置`复选框来设置为运行时可配置。变量可以在工作流执行时重新设置。

![create-wf-var](/img/v0.4.0/application/workflow/create-wf-var.png)

5. 添加阶段和步骤，添加步骤，点击添加图标来添加新的阶段，然后可以在阶段中添加步骤，然后点击`添加步骤`，选择步骤类型，然后可以添加步骤配置。不同的步骤类型有不同的配置项。您可以根据步骤的要求输入相应的配置项，如超时时间，重试等。

![create-wf-step](/img/v0.4.0/application/workflow/create-wf-step.png)

变量可以通过`${workflow.var.variableName}`在步骤配置中引用。在工作流执行时，它将被替换为变量值。

![create-wf-step-service](/img/v0.4.0/application/workflow/create-wf-step-service.png)

添加步骤后，可以点击`保存`按钮来保存工作流配置。

## 编辑工作流
1. 通过查看工作流列表的操作，进入工作流列表页面。
2. 选择需要编辑的工作流，点击编辑按钮。
3. 根据需要修改工作流配置，添加或删除阶段和步骤。
4. 点击`保存`按钮来保存工作流配置。

![edit-wf](/img/v0.4.0/application/workflow/edit-wf.png)

## 运行工作流
1. 通过查看工作流列表的操作，进入工作流列表页面。
2. 选择需要运行的工作流，点击运行按钮。
3. 填写工作流变量，然后点击`运行`按钮来运行工作流。

![run-wf](/img/v0.4.0/application/workflow/run-wf.png)

## 查看工作流执行
1. 通过查看工作流列表的操作，进入工作流列表页面。
2. 选择需要查看的工作流，点击工作流名称，进入工作流执行列表页面。

![wf-exec-list](/img/v0.4.0/application/workflow/run-wf-list.png)

3. 点击工作流执行名称，可以查看工作流执行详情。
4. 点击`日志`按钮，可以查看工作流执行日志。

![wf-exec](/img/v0.4.0/application/workflow/run-wf-detail.png)

5. 工作流执行完成后，可以在工作流执行详情页面查看工作流执行结果。如:服务类型步骤中查看工作流部署或升级的服务，审批步骤中查看审批结果。

![wf-exec-result](/img/v0.4.0/application/workflow/run-wf-result.png)

6. 工作流创建的服务将显示在环境视图列表中。

![wf-exec-svc](/img/v0.4.0/application/workflow/run-wf-svc.png)

## 删除工作流

1. 通过查看工作流列表的操作，进入工作流列表页面。
2. 选择需要删除的工作流，点击删除按钮删除工作流。